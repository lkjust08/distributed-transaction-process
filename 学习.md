# 总结
##  实现方法
1. 基于可靠消息实现<br>
   ***本地消息表 + rabbitMq***
2. 待确认消息先存储于数据库
3.  当确认命令时，修改状态并发送MQ消息


## 2，定时任务，扫描 待确认消息与发送中的消息（发送超时）


## 3，问题
  本地消息与本地业务没有在同一个事务里完成，有可能本地业务成功但，本地消息保存失败<br>
  因为消息数据独立存储，引起以上情况<br>
  MessageServiceTest-》testConfirmAndSendMessage()
